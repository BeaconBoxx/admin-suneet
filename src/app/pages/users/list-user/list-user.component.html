<div class="card">
  <div class="card-body">
    <div class="row">
      <div class="col-md-4">
        <div class="">
          <input type="text" class="form-control" (keyup)="search($event)" id="prenametext" placeholder="Search">
        </div>
      </div>
      <div class="col-md-8  text-right">
        <div ngbDropdown class="d-inline-block">
          <button class="btn btn-outline-primary btn-sm mr-2" id="dropdownBasic1" ngbDropdownToggle>
            {{is_active==null?"ALL":(is_active==true?"Active":"InActive")}}
          </button>
          <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
            <button class="dropdown-item" (click)="changeStatusList(null)">ALL</button>
            <button class="dropdown-item" (click)="changeStatusList(true)">Active</button>
            <button class="dropdown-item" (click)="changeStatusList(false)">Inactive</button>
          </div>
        </div>
        <button class="btn btn-primary btn-sm mr-2" routerLink="/users/useradd"><i class="fa fa-plus"></i> User</button>
        <button class="btn btn-primary  btn-sm" (click)="exportCsv()"><i class="sl-icon-cloud-download"></i> Export
          CSV</button>
      </div>
    </div>
    <div class="table-responsive">
      <table class="table">
        <tr>
          <th class="text-nowrap">#</th>
          <!-- <th class="text-nowrap">First Name</th> -->
          <th class="text-nowrap">Full Name</th>
          <th class="text-nowrap">DOB</th>
          <th class="text-nowrap">Phone No.</th>
          <th class="text-nowrap">Email</th>
          <th class="text-nowrap">Heart Rate</th>
          <th class="text-nowrap">Sp02 Level</th>
          <th class="text-nowrap">Heart Rate Variability</th>
          <th class="text-nowrap">Status</th>
          <th class="text-nowrap">Action</th>
        </tr>
        <tr *ngFor="let person of people;let i=index">
          <td>{{page==0?page+ i+1:page+i}}</td>
          <td>{{person?.first_name || '-'}} {{person?.last_name || '-'}}</td>
          <td>{{(person?.dob | date) || '-'}}</td>
          <td>{{person?.phone_no || '-'}}</td>
          <td class="text-center">{{person?.email || '-'}}</td>
          <td class="text-center">{{person?.heart_rate || '-'}}</td>
          <td class="text-center">{{person?.spo2 || '-'}}</td>
          <td class="text-center">{{person?.heart_rate_variability || '-'}}</td>
          <td>
            <mat-slide-toggle [checked]="person.is_active" (change)="changeStatus(person?.id)"></mat-slide-toggle>
          </td>

          <td>
            <div ngbDropdown placement="bottom" class="d-inline-block" container="body">
              <button class="btn btn-outline-primary btn-sm" id="dropdownBasic1" ngbDropdownToggle>
                Action
              </button>

              <div  ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <button class="dropdown-item" (click)="sendID(person?.id)"><i class="ti-marker-alt"></i>
                  Edit</button>
                <a class="dropdown-item" (click)="ViewSendID(person?.id)"><i class="ti-eye"></i>
                  View
                </a>

                <button class="dropdown-item" (click)="deleteUser(person?.id)"><i class="ti-trash"></i>
                  Delete</button>
              </div>
            </div>
          </td>
        </tr>
      </table>
    </div>
    <mat-paginator #paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]"
      (page)="pageEvent = pageSizeChanged($event)">
    </mat-paginator>
  </div>
</div>


<!-- delete modal -->
<ng-template #userDelete let-modal>
  <div class="modal-body">
    <p>Are you sure want to delete this user?</p>
    <div class="btn-group">
      <button type="button" class="btn btn-primary mr-2" aria-label="Close"
        (click)="modal.dismiss('Cross click')">Yes</button>
      <button type="button" class="btn btn-seconadary" aria-label="Close"
        (click)="modal.dismiss('Cross click')">No</button>
    </div>
  </div>
</ng-template>
